{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/classificacao-series-imdb/","result":{"data":{"site":{"siteMetadata":{"title":"Sabrina S. Santos","author":"johnywalves","siteUrl":"https://SabrinaSS.com"}},"markdownRemark":{"frontmatter":{"date":"19 de agosto de 2018","created":"2018-08-19 15:00:00 -0300","title":"Classificação de Séries IMDb","description":"Visualização de dados da base dados do IMDb com a linguagem R","category":"R","tags":["Visualização","ggplot"],"extras":null,"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABzIMroY//xAAYEAEBAQEBAAAAAAAAAAAAAAABAgADEf/aAAgBAQABBQKlrCae/h//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGn/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEhQf/aAAgBAQAGPwKtmlZ//8QAGBABAQEBAQAAAAAAAAAAAAAAAREAIYH/2gAIAQEAAT8hiqHE5RlhTzf/2gAMAwEAAgADAAAAEPwP/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAwEBPxDBJ7f/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8Q0MX/xAAbEAEAAgIDAAAAAAAAAAAAAAABESEAMVFhgf/aAAgBAQABPxB2I1QRrr3HQKapi8cTAwXo41n/2Q=="},"images":{"fallback":{"src":"/static/65087980279d1a4e998d02d13ecdf360/c62f0/theater-1.jpg","srcSet":"/static/65087980279d1a4e998d02d13ecdf360/86eb0/theater-1.jpg 300w,\n/static/65087980279d1a4e998d02d13ecdf360/a06fe/theater-1.jpg 600w,\n/static/65087980279d1a4e998d02d13ecdf360/c62f0/theater-1.jpg 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/65087980279d1a4e998d02d13ecdf360/cf267/theater-1.webp 300w,\n/static/65087980279d1a4e998d02d13ecdf360/540ab/theater-1.webp 600w,\n/static/65087980279d1a4e998d02d13ecdf360/3d0d9/theater-1.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":500}}}},"html":"<p>IMDb é uma maior referência para filmes, série, atores, diretores... podemos entender e visualizar na sua base toda a história de sua indústria cinematográfica a partir de <em>Passage de Venus</em> de 1874 por <em>Pierre Jules César Janssen</em> até os não lançados em pré-produção.<br>\nAtualizada diariamente <a href=\"https://datasets.imdbws.com/\">Base de dados</a> possuem uma <a href=\"https://www.imdb.com/interfaces/\">Estrutura fácil de entender</a></p>\n<p>Esse artigo foi utilizado os arquivos</p>\n<ul>\n<li><strong>title.ratings.tsv.gz</strong>: Classificação dos <strong>títulos</strong> feitos para os usuários</li>\n<li><strong>title.episode.tsv.gz</strong>: Classificação dos <strong>episódios</strong> das séries feitos para os usuários</li>\n<li><strong>title.basics.tsv.gz*`</strong>: Nome dos títulos</li>\n</ul>\n<h3>Ambiente</h3>\n<p>Para preparar o ambiente informei o diretório de trabalho indicado pelo <strong>'.'</strong> e limpei todas as variáveis de ambiente após pesquisar todas pelo .</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">setwd<span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span>\nrm<span class=\"token punctuation\">(</span>list<span class=\"token operator\">=</span>ls<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Classificação de Episódios</h3>\n<p>Carregar a fonte de dados de classificações e episódios</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">ratings <span class=\"token operator\">=</span> read.table<span class=\"token punctuation\">(</span>gzfile<span class=\"token punctuation\">(</span><span class=\"token string\">\"title.ratings.tsv.gz\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> header <span class=\"token operator\">=</span> <span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">)</span>\nepisode <span class=\"token operator\">=</span> read.table<span class=\"token punctuation\">(</span>gzfile<span class=\"token punctuation\">(</span><span class=\"token string\">\"title.episode.tsv.gz\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> header <span class=\"token operator\">=</span> <span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Depois de carregadas foram necessárias algumas manipulações preparar o data.frame</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Unir os data.frames de episódios e classificações</span>\nepisodeRating <span class=\"token operator\">&lt;-</span> cbind<span class=\"token punctuation\">(</span>episode<span class=\"token punctuation\">[</span>match<span class=\"token punctuation\">(</span>ratings<span class=\"token operator\">$</span>tconst<span class=\"token punctuation\">,</span> episode<span class=\"token operator\">$</span>tconst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ratings<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Remover episódios sem indicação de títulos</span>\nepisodeRating <span class=\"token operator\">&lt;-</span> episodeRating<span class=\"token punctuation\">[</span><span class=\"token operator\">!</span>is.na<span class=\"token punctuation\">(</span>episodeRating<span class=\"token operator\">$</span>parentTconst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Remover episódios sem númeração de temporada</span>\nepisodeRating <span class=\"token operator\">&lt;-</span> episodeRating<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>episodeRating<span class=\"token operator\">$</span>seasonNumber <span class=\"token operator\">!=</span> <span class=\"token string\">'\\\\N'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Remover episódios com 50 ou menos classificações</span>\nepisodeRating <span class=\"token operator\">&lt;-</span> episodeRating<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>episodeRating<span class=\"token operator\">$</span>numVotes <span class=\"token operator\">></span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Ordenar por episódios</span>\nepisodeRating <span class=\"token operator\">&lt;-</span> episodeRating<span class=\"token punctuation\">[</span>order<span class=\"token punctuation\">(</span>episodeRating<span class=\"token operator\">$</span>seasonNumber<span class=\"token punctuation\">,</span> episodeRating<span class=\"token operator\">$</span>episodeNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Converter os episódios e temporadas em números</span>\nepisodeRating<span class=\"token operator\">$</span>seasonNumber <span class=\"token operator\">&lt;-</span> as.integer<span class=\"token punctuation\">(</span>as.character<span class=\"token punctuation\">(</span>episodeRating<span class=\"token operator\">$</span>seasonNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nepisodeRating<span class=\"token operator\">$</span>episodeNumber <span class=\"token operator\">&lt;-</span> as.integer<span class=\"token punctuation\">(</span>as.character<span class=\"token punctuation\">(</span>episodeRating<span class=\"token operator\">$</span>episodeNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Separando somente as colunas para manipulação</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Somente as colunas de identificação do título e a classificação média</span>\nmeanRating <span class=\"token operator\">&lt;-</span> episodeRating<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>c<span class=\"token punctuation\">(</span><span class=\"token string\">'parentTconst'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'averageRating'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Agregar as classificações por título aplicação de médias</span>\nmeanRating <span class=\"token operator\">&lt;-</span> aggregate<span class=\"token punctuation\">(</span>averageRating <span class=\"token operator\">~</span> parentTconst<span class=\"token punctuation\">,</span> meanRating<span class=\"token punctuation\">,</span> mean<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Ordenar de forma decrescente as classificações</span>\nmeanRating <span class=\"token operator\">&lt;-</span> meanRating<span class=\"token punctuation\">[</span>order<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>meanRating<span class=\"token operator\">$</span>averageRating<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>Separando as séries pela classificação pela <a href=\"https://pt.wikipedia.org/wiki/Curva_ABC\">Curva ABC</a> onde a proporção de 20%, 30%, 50% dos melhores</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">nrow <span class=\"token operator\">&lt;-</span> nrow<span class=\"token punctuation\">(</span>meanRating<span class=\"token punctuation\">)</span>\nlimitA <span class=\"token operator\">&lt;-</span> nrow<span class=\"token operator\">*</span><span class=\"token number\">0.2</span>\nlimitB <span class=\"token operator\">&lt;-</span> nrow<span class=\"token operator\">*</span><span class=\"token number\">0.5</span>\nmediaCurvaA <span class=\"token operator\">&lt;-</span> mean<span class=\"token punctuation\">(</span>meanRating<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token operator\">:</span>limitA<span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token operator\">$</span>averageRating<span class=\"token punctuation\">)</span>\nmediaCurvaB <span class=\"token operator\">&lt;-</span> mean<span class=\"token punctuation\">(</span>meanRating<span class=\"token punctuation\">[</span>limitA<span class=\"token operator\">:</span>limitB<span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token operator\">$</span>averageRating<span class=\"token punctuation\">)</span>\nmediaCurvaC <span class=\"token operator\">&lt;-</span> mean<span class=\"token punctuation\">(</span>meanRating<span class=\"token punctuation\">[</span>limitB<span class=\"token operator\">:</span>nrow<span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token operator\">$</span>averageRating<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Para fins de exemplo foi escolhi o <a href=\"https://www.imdb.com/title/tt1751105/\">My Little Poney: Friendship is Magic</a> com o código <strong>tt1751105</strong>, por quê? Me pareceu divertido</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># My Little Poney: Friendship is Magic</span>\ncodSerie <span class=\"token operator\">&lt;-</span> <span class=\"token string\">'tt1751105'</span>\n<span class=\"token comment\"># Cálculo da média da série</span>\nmediaSerie <span class=\"token operator\">&lt;-</span> meanRating<span class=\"token punctuation\">[</span>meanRating<span class=\"token operator\">$</span>parentTconst <span class=\"token operator\">==</span> codSerie<span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token operator\">$</span>averageRating\n<span class=\"token comment\"># Filtar os episódios da série e remover atributos duplicados</span>\nepisodeRatingSerie <span class=\"token operator\">=</span> episodeRating<span class=\"token punctuation\">[</span>episodeRating<span class=\"token operator\">$</span>parentTconst <span class=\"token operator\">==</span> codSerie<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>Tratar os dados organizando gerando um número sequencial de episódios (Ex. \"0102\" segunda a primeira temporada, \"0312\" décimo segundo da terceira temporada) e ordenando pela sequência</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Organizar e ordenar episodios por sequência</span>\nlibrary<span class=\"token punctuation\">(</span>stringr<span class=\"token punctuation\">)</span>\nepisodeRatingSerie<span class=\"token operator\">$</span>episodeNumber <span class=\"token operator\">&lt;-</span> str_pad<span class=\"token punctuation\">(</span>episodeRatingSerie<span class=\"token operator\">$</span>episodeNumber<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> pad <span class=\"token operator\">=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">)</span>\nepisodeRatingSerie<span class=\"token operator\">$</span>seasonNumber <span class=\"token operator\">&lt;-</span> str_pad<span class=\"token punctuation\">(</span>episodeRatingSerie<span class=\"token operator\">$</span>seasonNumber<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> pad <span class=\"token operator\">=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">)</span>\nepisodeRatingSerie<span class=\"token operator\">$</span>episode <span class=\"token operator\">&lt;-</span> paste<span class=\"token punctuation\">(</span>episodeRatingSerie<span class=\"token operator\">$</span>seasonNumber<span class=\"token punctuation\">,</span>\n                                    episodeRatingSerie<span class=\"token operator\">$</span>episodeNumber<span class=\"token punctuation\">,</span> sep <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Ordenar</span>\nepisodeRatingSerie <span class=\"token operator\">&lt;-</span> episodeRatingSerie<span class=\"token punctuation\">[</span>order<span class=\"token punctuation\">(</span>episodeRatingSerie<span class=\"token operator\">$</span>episode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\nepisodeRatingSerie<span class=\"token operator\">$</span>ordemEpisode <span class=\"token operator\">&lt;-</span> seq<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>nrow<span class=\"token punctuation\">(</span>episodeRatingSerie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Gerar e visualizar as classificações geradas</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Definir cores as linhas</span>\nrainbow <span class=\"token operator\">&lt;-</span> rainbow<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Geração de gráfico por episódios</span>\nlibrary<span class=\"token punctuation\">(</span>ggplot2<span class=\"token punctuation\">)</span>\nggplot<span class=\"token punctuation\">(</span>episodeRatingSerie<span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x <span class=\"token operator\">=</span> ordemEpisode<span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> averageRating<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n  labs<span class=\"token punctuation\">(</span>x <span class=\"token operator\">=</span> <span class=\"token string\">\"Episódio\"</span><span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> <span class=\"token string\">\"Média de pontuação\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n  geom_line<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>rainbow<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n  geom_segment<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>rainbow<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">0.8</span><span class=\"token punctuation\">,</span>\n               aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> xend<span class=\"token operator\">=</span>nrow<span class=\"token punctuation\">(</span>episodeRatingSerie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>mediaSerie<span class=\"token punctuation\">,</span> yend<span class=\"token operator\">=</span>mediaSerie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> alpha <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n  theme_minimal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><img src=\"/static/serie-1-a0fa4bfc864f044b27e376dcdaf3b804.svg\" alt=\"plot of chunk serie\"></p>\n<h4>Inclusão de comparações</h4>\n<p>Gerar um <em>data frame</em> com a média por temporada de todas as séries</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">mediaTemporada <span class=\"token operator\">=</span> aggregate<span class=\"token punctuation\">(</span>episodeRatingSerie<span class=\"token operator\">$</span>averageRating<span class=\"token punctuation\">,</span>\n                           by<span class=\"token operator\">=</span>list<span class=\"token punctuation\">(</span>Category<span class=\"token operator\">=</span>episodeRatingSerie<span class=\"token operator\">$</span>seasonNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mean<span class=\"token punctuation\">)</span>\nmediaTemporada<span class=\"token operator\">$</span>Category <span class=\"token operator\">=</span> as.integer<span class=\"token punctuation\">(</span>mediaTemporada<span class=\"token operator\">$</span>Category<span class=\"token punctuation\">)</span>\ncolnames<span class=\"token punctuation\">(</span>mediaTemporada<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;-</span> c<span class=\"token punctuation\">(</span><span class=\"token string\">'seasonNumber'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'averageRating'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Gerar e visualizar as comparações geradas</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Definir cores as linhas</span>\nrainbow <span class=\"token operator\">&lt;-</span> rainbow<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Geração de gráfico comparação de temporadas das séries</span>\nggplot<span class=\"token punctuation\">(</span>mediaTemporada<span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span>seasonNumber<span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>averageRating<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    labs<span class=\"token punctuation\">(</span>x <span class=\"token operator\">=</span> <span class=\"token string\">\"Temporada\"</span><span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> <span class=\"token string\">\"Média de pontuação\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_line<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>rainbow<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n\n    geom_segment<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>rainbow<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                 aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> xend<span class=\"token operator\">=</span>nrow<span class=\"token punctuation\">(</span>mediaTemporada<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>mediaSerie<span class=\"token punctuation\">,</span> yend<span class=\"token operator\">=</span>mediaSerie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> alpha <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_segment<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>rainbow<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                 aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> xend<span class=\"token operator\">=</span>nrow<span class=\"token punctuation\">(</span>mediaTemporada<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>mediaCurvaA<span class=\"token punctuation\">,</span> yend<span class=\"token operator\">=</span>mediaCurvaA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_segment<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>rainbow<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                 aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> xend<span class=\"token operator\">=</span>nrow<span class=\"token punctuation\">(</span>mediaTemporada<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>mediaCurvaB<span class=\"token punctuation\">,</span> yend<span class=\"token operator\">=</span>mediaCurvaB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_segment<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>rainbow<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                 aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> xend<span class=\"token operator\">=</span>nrow<span class=\"token punctuation\">(</span>mediaTemporada<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>mediaCurvaC<span class=\"token punctuation\">,</span> yend<span class=\"token operator\">=</span>mediaCurvaC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n\n    geom_text<span class=\"token punctuation\">(</span>aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1.1</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>mediaSerie<span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'Série'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n              hjust<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> vjust<span class=\"token operator\">=</span><span class=\"token number\">0.55</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> colour<span class=\"token operator\">=</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_text<span class=\"token punctuation\">(</span>aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1.1</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>mediaCurvaA<span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n              hjust<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> vjust<span class=\"token operator\">=</span><span class=\"token number\">0.55</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> colour<span class=\"token operator\">=</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_text<span class=\"token punctuation\">(</span>aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1.1</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>mediaCurvaB<span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n              hjust<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> vjust<span class=\"token operator\">=</span><span class=\"token number\">0.55</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> colour<span class=\"token operator\">=</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_text<span class=\"token punctuation\">(</span>aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1.1</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>mediaCurvaC<span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'C'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n              hjust<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> vjust<span class=\"token operator\">=</span><span class=\"token number\">0.55</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> colour<span class=\"token operator\">=</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n\n    theme_minimal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><img src=\"/static/temporadas-1-fdfc947d6a80146adcb6e543bcc1fd5c.svg\" alt=\"plot of chunk temporadas\"></p>\n<h3>Comparação entre Séries</h3>\n<p>Para dar continuidade selecionei minhas séries favoritas</p>\n<p>Séries para ser comparadas:</p>\n<ul>\n<li><a href=\"https://www.imdb.com/title/tt0407362/\">tt0407362</a> : Battlestar Galactica</li>\n<li><a href=\"https://www.imdb.com/title/tt0903747/\">tt0903747</a> : Breaking Bad</li>\n<li><a href=\"https://www.imdb.com/title/tt0944947/\">tt0944947</a> : Game of Thrones</li>\n<li><a href=\"https://www.imdb.com/title/tt0411008/\">tt0411008</a> : Lost</li>\n<li><a href=\"https://www.imdb.com/title/tt0141842/\">tt0141842</a> : The Sopranos</li>\n</ul>\n<p>Para realizar a leitura temos de mudar algumas coisas, <em>quote</em>, limitador de texto, padrão é o \"'\" e <em>comment.char</em>, reconhecedor de comentários, é o \"#\", mas alguns nomes possuem eles sendo necessário configurar para ignorar essas entradas</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Importar títulos das séries</span>\ntitles <span class=\"token operator\">=</span> read.table<span class=\"token punctuation\">(</span>gzfile<span class=\"token punctuation\">(</span><span class=\"token string\">\"title.basics.tsv.gz\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sep<span class=\"token operator\">=</span><span class=\"token string\">\"\\t\"</span><span class=\"token punctuation\">,</span> quote<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> comment.char<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Listagem das séries</span>\ncodSeries <span class=\"token operator\">&lt;-</span> c<span class=\"token punctuation\">(</span><span class=\"token string\">'tt0407362'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tt0903747'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tt0944947'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tt0411008'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tt0141842'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Carregar pontuação da série</span>\ngrupoSeries <span class=\"token operator\">&lt;-</span> episodeRating<span class=\"token punctuation\">[</span>episodeRating<span class=\"token operator\">$</span>parentTconst <span class=\"token percent-operator operator\">%in%</span> codSeries<span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\ngrupoSeries <span class=\"token operator\">&lt;-</span> aggregate<span class=\"token punctuation\">(</span>grupoSeries<span class=\"token operator\">$</span>averageRating<span class=\"token punctuation\">,</span>\n                         by<span class=\"token operator\">=</span>list<span class=\"token punctuation\">(</span>seasonNumber<span class=\"token operator\">=</span>grupoSeries<span class=\"token operator\">$</span>seasonNumber<span class=\"token punctuation\">,</span>\n                                 parentTconst<span class=\"token operator\">=</span>grupoSeries<span class=\"token operator\">$</span>parentTconst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mean<span class=\"token punctuation\">)</span>\ncolnames<span class=\"token punctuation\">(</span>grupoSeries<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;-</span> <span class=\"token string\">'averageRating'</span>\n\n<span class=\"token comment\"># Capturar somente as colunas  títulos das séries</span>\ntitlesSeries <span class=\"token operator\">&lt;-</span> titles<span class=\"token punctuation\">[</span>titles<span class=\"token operator\">$</span>tconst <span class=\"token percent-operator operator\">%in%</span> as.factor<span class=\"token punctuation\">(</span>codSeries<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">(</span><span class=\"token string\">'tconst'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'primaryTitle'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\ngrupoSeries <span class=\"token operator\">&lt;-</span> cbind<span class=\"token punctuation\">(</span>titlesSeries<span class=\"token punctuation\">[</span>match<span class=\"token punctuation\">(</span>grupoSeries<span class=\"token operator\">$</span>parentTconst<span class=\"token punctuation\">,</span> titlesSeries<span class=\"token operator\">$</span>tconst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> grupoSeries<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">ggplot<span class=\"token punctuation\">(</span>grupoSeries<span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span>seasonNumber<span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>averageRating<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    labs<span class=\"token punctuation\">(</span>x <span class=\"token operator\">=</span> <span class=\"token string\">\"Temporada\"</span><span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> <span class=\"token string\">\"Média de pontuação\"</span><span class=\"token punctuation\">,</span> colour <span class=\"token operator\">=</span> <span class=\"token string\">\"Séries\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_line<span class=\"token punctuation\">(</span>aes<span class=\"token punctuation\">(</span>group <span class=\"token operator\">=</span> primaryTitle<span class=\"token punctuation\">,</span> colour <span class=\"token operator\">=</span> primaryTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    theme_minimal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><img src=\"/static/comparacao-1-83198a2c2cf2a3df119871233b8f7e6e.svg\" alt=\"plot of chunk comparacao\"></p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Quais as melhores de todos os tempos</span>\nmelhoresSeries <span class=\"token operator\">&lt;-</span> head<span class=\"token punctuation\">(</span>meanRating<span class=\"token punctuation\">)</span>\nmelhoresTitles <span class=\"token operator\">&lt;-</span> titles<span class=\"token punctuation\">[</span>titles<span class=\"token operator\">$</span>tconst <span class=\"token percent-operator operator\">%in%</span> as.factor<span class=\"token punctuation\">(</span>melhoresSeries<span class=\"token operator\">$</span>parentTconst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                         c<span class=\"token punctuation\">(</span><span class=\"token string\">'tconst'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'primaryTitle'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\nmelhoresSeries <span class=\"token operator\">&lt;-</span> cbind<span class=\"token punctuation\">(</span>melhoresTitles<span class=\"token punctuation\">[</span>match<span class=\"token punctuation\">(</span>melhoresSeries<span class=\"token operator\">$</span>parentTconst<span class=\"token punctuation\">,</span> melhoresTitles<span class=\"token operator\">$</span>tconst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                        melhoresSeries<span class=\"token punctuation\">)</span>\n\nprint<span class=\"token punctuation\">(</span>melhoresSeries<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">##            tconst             primaryTitle parentTconst averageRating\n## 381214  tt0396991                 LazyTown    tt0396991     10.000000\n## 2535133 tt2973110         BK Comedy Series    tt2973110     10.000000\n## 386084  tt0401969      Playing It Straight    tt0401969      9.975000\n## 3213875 tt4517806            Furusato-Time    tt4517806      9.950000\n## 2332879 tt2487370 Whose Line Is It Anyway?    tt2487370      9.947059\n## 183451  tt0190196  Romper Room and Friends    tt0190196      9.900000</code></pre></div>\n<p>Mas tudo isso pode significar nada, por essas classificações esta é a melhor série já produzida</p>","timeToRead":5,"excerpt":"IMDb é uma maior referência para filmes, série, atores, diretores... podemos entender e visualizar na sua base toda a história de sua…"}},"pageContext":{"slug":"/classificacao-series-imdb/","recommendedLast":{"frontmatter":{"date":"23 de julho de 2023","title":"Animação para esqueleto de elementos","category":"CSS","description":"Usando HTML, CSS e keyframes para animação de esqueleto de elementos carregando com gradiente","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAECBP/aAAwDAQACEAMQAAABzSNNUhf/xAAXEAADAQAAAAAAAAAAAAAAAAABAiEy/9oACAEBAAEFAoEhd9f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAARARQf/aAAgBAQAGPwK9E4//xAAZEAACAwEAAAAAAAAAAAAAAAAAAREhMVH/2gAIAQEAAT8hqw0N8FBZj//aAAwDAQACAAMAAAAQf+//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QxH//xAAbEAEAAwEAAwAAAAAAAAAAAAABESFBADFhgf/aAAgBAQABPxAAUttKr5ykW1HIJTkPIifJvvv/2Q=="},"images":{"fallback":{"src":"/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/c62f0/skeleton-1.jpg","srcSet":"/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/86eb0/skeleton-1.jpg 300w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/a06fe/skeleton-1.jpg 600w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/c62f0/skeleton-1.jpg 1200w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/23bd6/skeleton-1.jpg 2400w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/cf267/skeleton-1.webp 300w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/540ab/skeleton-1.webp 600w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/3d0d9/skeleton-1.webp 1200w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/51c0c/skeleton-1.webp 2400w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":500}}},"published":true},"timeToRead":1,"fields":{"slug":"/estilizacao-skeleton/"}},"recommendedCategory":{"frontmatter":{"date":"19 de agosto de 2018","title":"Mortes em Kill Bill","category":"R","description":"Visualização de dados de filmes do Tarantino com a linguagem R","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwEC/9oADAMBAAIQAxAAAAHOpBSUan//xAAYEAEBAQEBAAAAAAAAAAAAAAABAgMRE//aAAgBAQABBQIzrtZtnnY//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BiP/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/Aar/xAAYEAEAAwEAAAAAAAAAAAAAAAAAASExcf/aAAgBAQAGPwK4cY//xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhMf/aAAgBAQABPyHiqFi4lOeAygF7/9oADAMBAAIAAwAAABCMH//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxAGR//EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQIBAT8Qb6Wf/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITFB/9oACAEBAAE/EKag/iCOOtkFHcWBsA9HJ//Z"},"images":{"fallback":{"src":"/static/d62eab713d799b1f2b275d42b1e7513c/2d7d2/kill-bill-1.jpg","srcSet":"/static/d62eab713d799b1f2b275d42b1e7513c/a3a49/kill-bill-1.jpg 292w,\n/static/d62eab713d799b1f2b275d42b1e7513c/8f469/kill-bill-1.jpg 585w,\n/static/d62eab713d799b1f2b275d42b1e7513c/2d7d2/kill-bill-1.jpg 1169w","sizes":"(min-width: 1169px) 1169px, 100vw"},"sources":[{"srcSet":"/static/d62eab713d799b1f2b275d42b1e7513c/8ab35/kill-bill-1.webp 292w,\n/static/d62eab713d799b1f2b275d42b1e7513c/eebd3/kill-bill-1.webp 585w,\n/static/d62eab713d799b1f2b275d42b1e7513c/b910b/kill-bill-1.webp 1169w","type":"image/webp","sizes":"(min-width: 1169px) 1169px, 100vw"}]},"width":1200,"height":499.9144568006843}}},"published":true},"timeToRead":2,"fields":{"slug":"/mortes-kill-bill/"}}}},"staticQueryHashes":["1433154849","3590877595","3764592887","512065377","764694655"],"slicesMap":{}}