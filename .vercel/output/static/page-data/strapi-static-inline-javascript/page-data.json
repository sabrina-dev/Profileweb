{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/strapi-static-inline-javascript/","result":{"data":{"site":{"siteMetadata":{"title":"Sabrina S. Santos","author":"johnywalves","siteUrl":"https://SabrinaSS.com"}},"markdownRemark":{"frontmatter":{"date":"09 de abril de 2022","created":"2022-04-09 12:18:34 -0300","title":"Strapi - Static com JavaScript Inline","description":"Disponibilizar arquivos pela raiz do Strapi com JavaScript embutido","category":"Strapi","tags":["Strapi","Static"],"extras":null,"featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAME/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAbxC9YU//8QAFxABAQEBAAAAAAAAAAAAAAAAAgEDIf/aAAgBAQABBQIyMZBHSzv/xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAwEBPwGH/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/AYx//8QAGhAAAAcAAAAAAAAAAAAAAAAAAAECEBExQf/aAAgBAQAGPwJUWYxv/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITFB/9oACAEBAAE/IVTHWZy1eLqQ2P/aAAwDAQACAAMAAAAQd/8A/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EFxWt//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxAalm//xAAaEAEAAwEBAQAAAAAAAAAAAAABABExIVFx/9oACAEBAAE/EBi4hmvMggIC2hga9ixD7TU//9k="},"images":{"fallback":{"src":"/static/0b7a3ec8fbfc2841561b1956c6badfd9/c62f0/armband-1.jpg","srcSet":"/static/0b7a3ec8fbfc2841561b1956c6badfd9/86eb0/armband-1.jpg 300w,\n/static/0b7a3ec8fbfc2841561b1956c6badfd9/a06fe/armband-1.jpg 600w,\n/static/0b7a3ec8fbfc2841561b1956c6badfd9/c62f0/armband-1.jpg 1200w,\n/static/0b7a3ec8fbfc2841561b1956c6badfd9/23bd6/armband-1.jpg 2400w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/0b7a3ec8fbfc2841561b1956c6badfd9/cf267/armband-1.webp 300w,\n/static/0b7a3ec8fbfc2841561b1956c6badfd9/540ab/armband-1.webp 600w,\n/static/0b7a3ec8fbfc2841561b1956c6badfd9/3d0d9/armband-1.webp 1200w,\n/static/0b7a3ec8fbfc2841561b1956c6badfd9/51c0c/armband-1.webp 2400w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":500}}}},"html":"<p>Strapi é um headless CMS, em NodeJS com Koa, com grande facilidade de personalização, facilitando subir uma ferramenta e adequando para seu uso no decorrer do projeto</p>\n<p>Embora não seja recomendando fazer uso da pasta <strong>public</strong> para disponibilizar conteúdo, no início do projeto pode ser de grande ajuda</p>\n<h2>Problema</h2>\n<p>Fazendo uso da versão do Stapi <code class=\"language-text\">4.1.7</code>, podemos colocar os arquivos estáticos na pasta <strong>public</strong> que serão entregues pelo sistema, lembrando não fazer uso de caminhos já usados como <strong>admin</strong> e <strong>api</strong></p>\n<p>Por conta das restrições de segurança informados pela propriedade <code class=\"language-text\">Content-Security-Policy</code> no header da resposta do GET não podemos fazer uso de alguns recursos</p>\n<p>Incluindo dentro dele comandos JavaScript com a tag <code class=\"language-text\">&lt;script></code> podemos incorporar nas diretivas de segurança para liberar essa opção</p>\n<h2>Procedimento</h2>\n<p>Dentro do <strong>config/middlewares.js</strong> alterar a declaração do <code class=\"language-text\">strapi::security</code> por</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'strapi::security'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">config</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">contentSecurityPolicy</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">directives</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'script-src'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"'self'\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"'unsafe-inline'\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Observando o <code class=\"language-text\">self</code> que vai garantir que o sistema admin vai continuar funcionando com conta dos scripts do React ou outros que faça a chamada e <code class=\"language-text\">unsafe-inline</code> para executar os scripts dentro da tag <code class=\"language-text\">&lt;script></code></p>","timeToRead":1,"excerpt":"Strapi é um headless CMS, em NodeJS com Koa, com grande facilidade de personalização, facilitando subir uma ferramenta e adequando para seu…"}},"pageContext":{"slug":"/strapi-static-inline-javascript/","recommendedLast":{"frontmatter":{"date":"23 de julho de 2023","title":"Animação para esqueleto de elementos","category":"CSS","description":"Usando HTML, CSS e keyframes para animação de esqueleto de elementos carregando com gradiente","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAECBP/aAAwDAQACEAMQAAABzSNNUhf/xAAXEAADAQAAAAAAAAAAAAAAAAABAiEy/9oACAEBAAEFAoEhd9f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAARARQf/aAAgBAQAGPwK9E4//xAAZEAACAwEAAAAAAAAAAAAAAAAAAREhMVH/2gAIAQEAAT8hqw0N8FBZj//aAAwDAQACAAMAAAAQf+//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QxH//xAAbEAEAAwEAAwAAAAAAAAAAAAABESFBADFhgf/aAAgBAQABPxAAUttKr5ykW1HIJTkPIifJvvv/2Q=="},"images":{"fallback":{"src":"/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/c62f0/skeleton-1.jpg","srcSet":"/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/86eb0/skeleton-1.jpg 300w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/a06fe/skeleton-1.jpg 600w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/c62f0/skeleton-1.jpg 1200w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/23bd6/skeleton-1.jpg 2400w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/cf267/skeleton-1.webp 300w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/540ab/skeleton-1.webp 600w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/3d0d9/skeleton-1.webp 1200w,\n/static/40aaa21d6d234b122ff0bd3b4ca0f9a0/51c0c/skeleton-1.webp 2400w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":500}}},"published":true},"timeToRead":1,"fields":{"slug":"/estilizacao-skeleton/"}}}},"staticQueryHashes":["1433154849","3590877595","3764592887","512065377","764694655"],"slicesMap":{}}